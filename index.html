<!Doctype html>
<html>
    <head>
        <title>Chat App Test</title>
    </head>
    <body>
        <h1>Chat Application</h1>
        <form>
            <input type="text" placeholder="insert message" autocomplete="off" id="message"/>
            <input type="submit" value="Send" id="submit-message"/>
        </form>
        
        <section id="messages-container">
            
        </section>
        
        <button id="clear-screen">Clear Screen</button>
        
        <script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('https://my-chat-app-ferbarra2207.c9users.io/');
            
            socket.on('connect', function(data) {
                var nickname = prompt('Choose a nickname');
                socket.emit('join', nickname);
            });
            
            socket.on('chat', function(newUser) {
                $(`<p><strong>${newUser}</strong></p>`).appendTo('#messages-container');
            });
            
            socket.on('messages', function(data) {
                $(`<p>${data}</p>`).appendTo('#messages-container');
                console.log(data);
            });
            
            $(document).ready(function() {
                $('form').submit(function(e) {
                    e.preventDefault();
                    var message = $('#message').val();
                    
                    if (typeof message === 'string' && message !== '') {
                        socket.emit('messages', message);
                        $('#message').val('');
                    }
                });
                
                $('#clear-screen').on('click', function() {
                    $('#messages-container').html('');
                });
            });
        </script>
    </body>
</html>